<!DOCTYPE html>
<!-- saved from url=(0050)https://threejs.org/examples/webvr_vive_paint.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>three.js webvr - htc vive - paint</title>
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		<!-- Origin Trial Token, feature = WebVR (For Chrome M62+), origin = https://threejs.org, expires = 2018-01-21 -->
		<meta http-equiv="origin-trial" data-feature="WebVR (For Chrome M62+)" data-expires="2018-01-21" content="Ap+tmQjuEXRrzmu+ZuReB/eY8fZmTEOybJ2hME1RgEZAPzhZ4/IAKEHRebiTp6o4LoZOMBexL4GAL7flIkAUlQYAAABQeyJvcmlnaW4iOiJodHRwczovL3RocmVlanMub3JnOjQ0MyIsImZlYXR1cmUiOiJXZWJWUjEuMU02MiIsImV4cGlyeSI6MTUxNjUzODYxMX0=">
		<style>
			body {
				font-family: Monospace;
				background-color: #101010;
				color: #fff;
				margin: 0px;
				overflow: hidden;
			}
			a {
				color: #f00;
			}
		</style>
		<!-- Graphics -->
		<script src="./js/three.js"></script>
		<script src="./js/phys/physi.js"></script>
		<!-- VR -->
		<script src="./js/ViveController.js"></script>
		<script src="./js/WebVR.js"></script>
		<!-- Loaders -->
		<script src="./js/loaders/OBJLoader.js"></script>
		<script src="./js/loaders/MTLLoader.js"></script>
		<!-- Custom code -->
		<script src="./js/PaintViveController.js"></script>
		<script src="./js/painter.js"></script>
		<script src="./js/basic_scene.js"></script>
		<script src="./js/ctrlrsetup.js"></script>

		<script>
			'use strict';
			Physijs.scripts.worker = 'js/phys/physijs_worker.js';
			Physijs.scripts.ammo = '/js/phys/ammo.js';
	
			var container;
			var camera, scene, renderer;
			var user;
			var controller1, controller2;

			var line;
			var shapes = {};

			var up = new THREE.Vector3( 0, 1, 0 );
			var vector = new THREE.Vector3();

			var vector1 = new THREE.Vector3();
			var vector2 = new THREE.Vector3();
			var vector3 = new THREE.Vector3();
			var vector4 = new THREE.Vector3();

			var point4 = new THREE.Vector3();
			var point5 = new THREE.Vector3();

			window.onload = function(){
				init();
				initGeometry();
			}
			
			function init_info(){
				container = document.createElement( 'div' );
				document.body.appendChild( container );
				var info = document.createElement( 'div' );
				info.style.position = 'absolute';
				info.style.top = '10px';
				info.style.width = '100%';
				info.style.textAlign = 'center';
				info.innerHTML = '<a href="http://threejs.org" target="_blank" rel="noopener">three.js</a> webgl - htc vive - paint';
				container.appendChild( info );
			}
			
			
			function init() {

				init_info();
				init_scene();
				init_user();
				init_camera();
				init_objects();
				init_renderer();
				/////////////////////////////////////////////////////////////////
				///	THE BELOW CODE MAY BRICK !WARNING! 
				/////////////////////////////////////////////////////////////////
				controller1 = new THREE.PaintViveController( 0 );
				controller1.userData.points = [ new THREE.Vector3(), new THREE.Vector3() ];
				controller1.userData.matrices = [ new THREE.Matrix4(), new THREE.Matrix4() ];
				user.add( controller1 );
				controller2 = new THREE.PaintViveController( 1 );
				controller2.userData.points = [ new THREE.Vector3(), new THREE.Vector3() ];
				controller2.userData.matrices = [ new THREE.Matrix4(), new THREE.Matrix4() ];
				user.add( controller2 );
				load_controller_models();

				window.addEventListener( 'resize', onWindowResize, false );

				requestAnimationFrame( render );
				scene.simulate();
				console.log('%c GREENLIGHT! ', 'color: #017a17');
			}	


			function onWindowResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize( window.innerWidth, window.innerHeight );
			}

			
			function render() {

				// var count = line.geometry.drawRange.count;

				handleController( controller1 );
				handleController( controller2 );

				// updateGeometry( count, line.geometry.drawRange.count );
				scene.simulate(); // run physics
				requestAnimationFrame( render );
				renderer.render( scene, camera );
				
			}

		</script>
	</head>
	<body>
		<div>
			<div style="position: absolute; top: 10px; width: 100%; text-align: center;">
				<a href="http://threejs.org/" target="_blank" rel="noopener">three.js</a> webgl - htc vive - paint
			</div>
			<canvas width="3024" height="1680" style="width: 1280px; height: 918px;"></canvas>
		</div>
	</body>
</html>